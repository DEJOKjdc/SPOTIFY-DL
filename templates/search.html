<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ðŸŽ§ AI Music Popularity Predictor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="bg-dark text-light">

<div class="container py-5">
    <h2 class="text-center mb-4">ðŸŽµ Search Song (LLM-based Features)</h2>

    <form method="POST" class="bg-secondary p-4 rounded shadow">
        <div class="mb-3">
            <label class="form-label">Track Name:</label>
            <input type="text" name="track_name" class="form-control" placeholder="Enter track name" required>
        </div>
        <div class="mb-3">
            <label class="form-label">Artist:</label>
            <input type="text" name="artist" class="form-control" placeholder="Enter artist name" required>
        </div>
        <button type="submit" class="btn btn-warning w-100">ðŸŽ¶ Predict & Recommend</button>
    </form>

    {% if error_message %}
    <div class="alert alert-danger mt-4">{{ error_message }}</div>
    {% endif %}

    {% if result %}
    <div class="mt-5">
        <h4>ðŸ§  LLM-Predicted Features:</h4>
        <pre class="bg-light text-dark p-3 rounded">{{ result.metadata | tojson(indent=2) }}</pre>

        <h4 class="mt-4">ðŸ“ˆ Popularity Prediction:</h4>
        <ul>
            <li>FNN Prediction: {{ result.prediction.fnn_prediction }}</li>
            <li>XGB Prediction: {{ result.prediction.xgb_prediction }}</li>
            <li>Final Predicted Popularity: {{ result.prediction.popularity_prediction }}</li>
        </ul>

        <h4 class="mt-4">ðŸŽ§ Recommended Songs:</h4>
        <ul>
            {% for rec in result.recommendations %}
            <li class="mb-2">
                <strong>{{ rec.track }}</strong> by <em>{{ rec.artist }}</em> 
                (Similarity: {{ "%.4f"|format(rec.distance) }})
                <a href="{{ rec.youtube }}" target="_blank" class="btn btn-sm btn-outline-info ms-2">YouTube ðŸ”—</a>
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>

</body>
</html>
